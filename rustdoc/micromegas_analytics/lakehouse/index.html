<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="Module dedicated to the maintenance and query of materialized views"><title>micromegas_analytics::lakehouse - Rust</title><script>if(window.location.protocol!=="file:")document.head.insertAdjacentHTML("beforeend","SourceSerif4-Regular-6b053e98.ttf.woff2,FiraSans-Italic-81dc35de.woff2,FiraSans-Regular-0fe48ade.woff2,FiraSans-MediumItalic-ccf7e434.woff2,FiraSans-Medium-e1aa3f0a.woff2,SourceCodePro-Regular-8badfe75.ttf.woff2,SourceCodePro-Semibold-aa29a496.ttf.woff2".split(",").map(f=>`<link rel="preload" as="font" type="font/woff2"href="../../static.files/${f}">`).join(""))</script><link rel="stylesheet" href="../../static.files/normalize-9960930a.css"><link rel="stylesheet" href="../../static.files/rustdoc-ca0dd0c4.css"><meta name="rustdoc-vars" data-root-path="../../" data-static-root-path="../../static.files/" data-current-crate="micromegas_analytics" data-themes="" data-resource-suffix="" data-rustdoc-version="1.93.1 (01f6ddf75 2026-02-11)" data-channel="1.93.1" data-search-js="search-9e2438ea.js" data-stringdex-js="stringdex-a3946164.js" data-settings-js="settings-c38705f0.js" ><script src="../../static.files/storage-e2aeef58.js"></script><script defer src="../sidebar-items.js"></script><script defer src="../../static.files/main-a410ff4d.js"></script><noscript><link rel="stylesheet" href="../../static.files/noscript-263c88ec.css"></noscript><link rel="alternate icon" type="image/png" href="../../static.files/favicon-32x32-eab170b8.png"><link rel="icon" type="image/svg+xml" href="../../static.files/favicon-044be391.svg"></head><body class="rustdoc mod"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><rustdoc-topbar><h2><a href="#">Module lakehouse</a></h2></rustdoc-topbar><nav class="sidebar"><div class="sidebar-crate"><h2><a href="../../micromegas_analytics/index.html">micromegas_<wbr>analytics</a><span class="version">0.21.0</span></h2></div><div class="sidebar-elems"><section id="rustdoc-toc"><h2 class="location"><a href="#">Module lakehouse</a></h2><h3><a href="#modules">Module Items</a></h3><ul class="block"><li><a href="#modules" title="Modules">Modules</a></li></ul></section><div id="rustdoc-modnav"><h2 class="in-crate"><a href="../index.html">In crate micromegas_<wbr>analytics</a></h2></div></div></nav><div class="sidebar-resizer" title="Drag to resize sidebar"></div><main><div class="width-limiter"><section id="main-content" class="content"><div class="main-heading"><div class="rustdoc-breadcrumbs"><a href="../index.html">micromegas_analytics</a></div><h1>Module <span>lakehouse</span>&nbsp;<button id="copy-path" title="Copy item path to clipboard">Copy item path</button></h1><rustdoc-toolbar></rustdoc-toolbar><span class="sub-heading"><a class="src" href="../../src/micromegas_analytics/lakehouse/mod.rs.html#1-118">Source</a> </span></div><details class="toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><p>Module dedicated to the maintenance and query of materialized views</p>
<p>Unlike the telemetry data lake where it’s fast &amp; cheap to write but costly to read,
the lakehouse partitions are costly to write but allow for cheap &amp; fast queries using datafusion.</p>
<p>Views based on a low frequency of events (&lt; 1k events per second per process) are kept updated regularly.
Views based on a high frequency of events (up to 100k events per second per process) are metrialized on demand.</p>
</div></details><h2 id="modules" class="section-header">Modules<a href="#modules" class="anchor">§</a></h2><dl class="item-table"><dt><a class="mod" href="answer/index.html" title="mod micromegas_analytics::lakehouse::answer">answer</a></dt><dd>Record batches + schema</dd><dt><a class="mod" href="async_events_block_processor/index.html" title="mod micromegas_analytics::lakehouse::async_events_block_processor">async_<wbr>events_<wbr>block_<wbr>processor</a></dt><dd>Implementation of <code>BlockProcessor</code> for async events</dd><dt><a class="mod" href="async_events_view/index.html" title="mod micromegas_analytics::lakehouse::async_events_view">async_<wbr>events_<wbr>view</a></dt><dd>Materializable view of async span events accessible through datafusion</dd><dt><a class="mod" href="async_parquet_writer/index.html" title="mod micromegas_analytics::lakehouse::async_parquet_writer">async_<wbr>parquet_<wbr>writer</a></dt><dd>Write parquet in object store</dd><dt><a class="mod" href="batch_partition_merger/index.html" title="mod micromegas_analytics::lakehouse::batch_partition_merger">batch_<wbr>partition_<wbr>merger</a></dt><dd>BatchPartitionMerger merges multiple partitions by splitting the work in batches to use less memory.
The batches are based on event times.</dd><dt><a class="mod" href="batch_update/index.html" title="mod micromegas_analytics::lakehouse::batch_update">batch_<wbr>update</a></dt><dd>Materialize views on a schedule based on the time data was received from the ingestion service</dd><dt><a class="mod" href="block_partition_spec/index.html" title="mod micromegas_analytics::lakehouse::block_partition_spec">block_<wbr>partition_<wbr>spec</a></dt><dd>Specification for a view partition backed by a set of telemetry blocks which can be processed out of order</dd><dt><a class="mod" href="blocks_view/index.html" title="mod micromegas_analytics::lakehouse::blocks_view">blocks_<wbr>view</a></dt><dd>Replicated view of the <code>blocks</code> table of the postgresql metadata database.</dd><dt><a class="mod" href="caching_reader/index.html" title="mod micromegas_analytics::lakehouse::caching_reader">caching_<wbr>reader</a></dt><dd>Adds file content caching to object store reads</dd><dt><a class="mod" href="catalog/index.html" title="mod micromegas_analytics::lakehouse::catalog">catalog</a></dt><dd>Catalog utilities for discovering and managing view schemas
Catalog utilities for discovering and managing view schemas.</dd><dt><a class="mod" href="dataframe_time_bounds/index.html" title="mod micromegas_analytics::lakehouse::dataframe_time_bounds">dataframe_<wbr>time_<wbr>bounds</a></dt><dt><a class="mod" href="delete_duplicate_blocks_udf/index.html" title="mod micromegas_analytics::lakehouse::delete_duplicate_blocks_udf">delete_<wbr>duplicate_<wbr>blocks_<wbr>udf</a></dt><dd>Scalar UDF to delete duplicate blocks</dd><dt><a class="mod" href="delete_duplicate_processes_udf/index.html" title="mod micromegas_analytics::lakehouse::delete_duplicate_processes_udf">delete_<wbr>duplicate_<wbr>processes_<wbr>udf</a></dt><dd>Scalar UDF to delete duplicate processes</dd><dt><a class="mod" href="delete_duplicate_streams_udf/index.html" title="mod micromegas_analytics::lakehouse::delete_duplicate_streams_udf">delete_<wbr>duplicate_<wbr>streams_<wbr>udf</a></dt><dd>Scalar UDF to delete duplicate streams</dd><dt><a class="mod" href="export_log_view/index.html" title="mod micromegas_analytics::lakehouse::export_log_view">export_<wbr>log_<wbr>view</a></dt><dd>Export mechanism that doubles as audit trail</dd><dt><a class="mod" href="file_cache/index.html" title="mod micromegas_analytics::lakehouse::file_cache">file_<wbr>cache</a></dt><dd>Global LRU cache for parquet file contents</dd><dt><a class="mod" href="get_payload_function/index.html" title="mod micromegas_analytics::lakehouse::get_payload_function">get_<wbr>payload_<wbr>function</a></dt><dd>Fetch payload from the object store using SQL</dd><dt><a class="mod" href="jit_partitions/index.html" title="mod micromegas_analytics::lakehouse::jit_partitions">jit_<wbr>partitions</a></dt><dd>Management of process-specific partitions built on demand</dd><dt><a class="mod" href="lakehouse_context/index.html" title="mod micromegas_analytics::lakehouse::lakehouse_context">lakehouse_<wbr>context</a></dt><dd>Bundles runtime resources for lakehouse query execution</dd><dt><a class="mod" href="list_partitions_table_function/index.html" title="mod micromegas_analytics::lakehouse::list_partitions_table_function">list_<wbr>partitions_<wbr>table_<wbr>function</a></dt><dd>Read access to the list of lakehouse partitions</dd><dt><a class="mod" href="list_view_sets_table_function/index.html" title="mod micromegas_analytics::lakehouse::list_view_sets_table_function">list_<wbr>view_<wbr>sets_<wbr>table_<wbr>function</a></dt><dd>Read access to view sets with their schema information</dd><dt><a class="mod" href="log_block_processor/index.html" title="mod micromegas_analytics::lakehouse::log_block_processor">log_<wbr>block_<wbr>processor</a></dt><dd>Implementation of <code>BlockProcessor</code> for log entries</dd><dt><a class="mod" href="log_stats_view/index.html" title="mod micromegas_analytics::lakehouse::log_stats_view">log_<wbr>stats_<wbr>view</a></dt><dd>SQL-based view for log statistics aggregated by process, minute, level, and target</dd><dt><a class="mod" href="log_view/index.html" title="mod micromegas_analytics::lakehouse::log_view">log_<wbr>view</a></dt><dd>Materializable view of log entries accessible through datafusion</dd><dt><a class="mod" href="materialize_partitions_table_function/index.html" title="mod micromegas_analytics::lakehouse::materialize_partitions_table_function">materialize_<wbr>partitions_<wbr>table_<wbr>function</a></dt><dd>Exposes materialize_partitions as a table function</dd><dt><a class="mod" href="materialized_view/index.html" title="mod micromegas_analytics::lakehouse::materialized_view">materialized_<wbr>view</a></dt><dd>TableProvider implementation for the lakehouse</dd><dt><a class="mod" href="merge/index.html" title="mod micromegas_analytics::lakehouse::merge">merge</a></dt><dd>Merge consecutive parquet partitions into a single file</dd><dt><a class="mod" href="metadata_cache/index.html" title="mod micromegas_analytics::lakehouse::metadata_cache">metadata_<wbr>cache</a></dt><dd>Global LRU cache for partition metadata</dd><dt><a class="mod" href="metadata_compat/index.html" title="mod micromegas_analytics::lakehouse::metadata_compat">metadata_<wbr>compat</a></dt><dd>Compatibility layer for parsing legacy Arrow 56.0 metadata and upgrading to Arrow 57.0</dd><dt><a class="mod" href="metadata_partition_spec/index.html" title="mod micromegas_analytics::lakehouse::metadata_partition_spec">metadata_<wbr>partition_<wbr>spec</a></dt><dd>Specification for a view partition backed by a table in the postgresql metadata database.</dd><dt><a class="mod" href="metrics_block_processor/index.html" title="mod micromegas_analytics::lakehouse::metrics_block_processor">metrics_<wbr>block_<wbr>processor</a></dt><dd>Implementation of <code>BlockProcessor</code> for measures</dd><dt><a class="mod" href="metrics_view/index.html" title="mod micromegas_analytics::lakehouse::metrics_view">metrics_<wbr>view</a></dt><dd>Materializable view of measures accessible through datafusion</dd><dt><a class="mod" href="migration/index.html" title="mod micromegas_analytics::lakehouse::migration">migration</a></dt><dd>Maintenance of the postgresql tables and indices use to track the parquet files used to implement the views</dd><dt><a class="mod" href="partition/index.html" title="mod micromegas_analytics::lakehouse::partition">partition</a></dt><dd>Write &amp; delete sections of views</dd><dt><a class="mod" href="partition_cache/index.html" title="mod micromegas_analytics::lakehouse::partition_cache">partition_<wbr>cache</a></dt><dd>In-memory copy of a subnet of the list of the partitions in the db</dd><dt><a class="mod" href="partition_metadata/index.html" title="mod micromegas_analytics::lakehouse::partition_metadata">partition_<wbr>metadata</a></dt><dd>Operations on the dedicated partition_metadata table</dd><dt><a class="mod" href="partition_source_data/index.html" title="mod micromegas_analytics::lakehouse::partition_source_data">partition_<wbr>source_<wbr>data</a></dt><dd>Describes the event blocks backing a partition</dd><dt><a class="mod" href="partitioned_execution_plan/index.html" title="mod micromegas_analytics::lakehouse::partitioned_execution_plan">partitioned_<wbr>execution_<wbr>plan</a></dt><dd>ExecutionPlan based on a set of parquet files</dd><dt><a class="mod" href="partitioned_table_provider/index.html" title="mod micromegas_analytics::lakehouse::partitioned_table_provider">partitioned_<wbr>table_<wbr>provider</a></dt><dd>TableProvider based on a set of parquet files</dd><dt><a class="mod" href="perfetto_trace_execution_plan/index.html" title="mod micromegas_analytics::lakehouse::perfetto_trace_execution_plan">perfetto_<wbr>trace_<wbr>execution_<wbr>plan</a></dt><dd>ExecutionPlan for generating Perfetto trace chunks</dd><dt><a class="mod" href="perfetto_trace_table_function/index.html" title="mod micromegas_analytics::lakehouse::perfetto_trace_table_function">perfetto_<wbr>trace_<wbr>table_<wbr>function</a></dt><dd>Table function for generating Perfetto trace chunks</dd><dt><a class="mod" href="processes_view/index.html" title="mod micromegas_analytics::lakehouse::processes_view">processes_<wbr>view</a></dt><dd>Replicated view of the <code>processes</code> table of the postgresql metadata database.</dd><dt><a class="mod" href="query/index.html" title="mod micromegas_analytics::lakehouse::query">query</a></dt><dd>property_get function support from SQL
Datafusion integration</dd><dt><a class="mod" href="reader_factory/index.html" title="mod micromegas_analytics::lakehouse::reader_factory">reader_<wbr>factory</a></dt><dd>Wrapper around ParquetObjectreader to provide ParquetMetaData without hitting the ObjectStore</dd><dt><a class="mod" href="retire_partition_by_file_udf/index.html" title="mod micromegas_analytics::lakehouse::retire_partition_by_file_udf">retire_<wbr>partition_<wbr>by_<wbr>file_<wbr>udf</a></dt><dd>Scalar UDF to retire a single partition by file path</dd><dt><a class="mod" href="retire_partition_by_metadata_udf/index.html" title="mod micromegas_analytics::lakehouse::retire_partition_by_metadata_udf">retire_<wbr>partition_<wbr>by_<wbr>metadata_<wbr>udf</a></dt><dd>Scalar UDF to retire a single partition by metadata</dd><dt><a class="mod" href="retire_partitions_table_function/index.html" title="mod micromegas_analytics::lakehouse::retire_partitions_table_function">retire_<wbr>partitions_<wbr>table_<wbr>function</a></dt><dd>Exposes retire_partitions as a table function</dd><dt><a class="mod" href="runtime/index.html" title="mod micromegas_analytics::lakehouse::runtime">runtime</a></dt><dd>Runtime resources</dd><dt><a class="mod" href="session_configurator/index.html" title="mod micromegas_analytics::lakehouse::session_configurator">session_<wbr>configurator</a></dt><dd>SessionConfigurator trait for custom session context configuration</dd><dt><a class="mod" href="sql_batch_view/index.html" title="mod micromegas_analytics::lakehouse::sql_batch_view">sql_<wbr>batch_<wbr>view</a></dt><dd>Sql-defined view updated in batch</dd><dt><a class="mod" href="sql_partition_spec/index.html" title="mod micromegas_analytics::lakehouse::sql_partition_spec">sql_<wbr>partition_<wbr>spec</a></dt><dd>Specification for a view partition backed by a SQL query on the lakehouse.</dd><dt><a class="mod" href="streams_view/index.html" title="mod micromegas_analytics::lakehouse::streams_view">streams_<wbr>view</a></dt><dd>Replicated view of the <code>streams</code> table of the postgresql metadata database.</dd><dt><a class="mod" href="table_scan_rewrite/index.html" title="mod micromegas_analytics::lakehouse::table_scan_rewrite">table_<wbr>scan_<wbr>rewrite</a></dt><dd>Rewrite table scans to take the query range into account</dd><dt><a class="mod" href="temp/index.html" title="mod micromegas_analytics::lakehouse::temp">temp</a></dt><dd>Tracking of expired partitions</dd><dt><a class="mod" href="thread_spans_view/index.html" title="mod micromegas_analytics::lakehouse::thread_spans_view">thread_<wbr>spans_<wbr>view</a></dt><dd>Jit view of the call tree built from the thread events of a single stream</dd><dt><a class="mod" href="view/index.html" title="mod micromegas_analytics::lakehouse::view">view</a></dt><dd>Basic interface for a set of rows queryable and materializable</dd><dt><a class="mod" href="view_factory/index.html" title="mod micromegas_analytics::lakehouse::view_factory">view_<wbr>factory</a></dt><dd><a href="view_factory/fn.default_view_factory.html" title="fn micromegas_analytics::lakehouse::view_factory::default_view_factory"><code>default_view_factory</code></a> makes the default <a href="view_factory/struct.ViewFactory.html" title="struct micromegas_analytics::lakehouse::view_factory::ViewFactory"><code>ViewFactory</code></a>, giving users access to view instances, grouped in sets.</dd><dt><a class="mod" href="view_instance_table_function/index.html" title="mod micromegas_analytics::lakehouse::view_instance_table_function">view_<wbr>instance_<wbr>table_<wbr>function</a></dt><dd>Table function to query process-specific views</dd><dt><a class="mod" href="write_partition/index.html" title="mod micromegas_analytics::lakehouse::write_partition">write_<wbr>partition</a></dt><dd>Add or remove view partitions</dd></dl></section></div></main></body></html>